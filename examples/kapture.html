<html>

<script type="text/javascript" charset="utf-8" src='../kapture.js'></script>
<script type="text/javascript" charset="utf-8" src='../js/mootools.js'></script>

<script type="text/javascript" charset="utf-8">
  var kap = new Kapture();
  kap.safe_input = true;

  kap.add_command('control-x control-f', function(term) {
    document.activeElement.value += 'asdf';
  });
  kap.add_passive_command('j', function(term) {
    $('foo').value += 'fooooo  ';
  });
  kap.add_command('control-x f', function(term) {
    document.activeElement.value += 'asdfwoooooo';
  });


  kap.on_push = function(key) {
    var d = document.getElementById('debug');
    d.innerHTML += 'PUSH:' + key +'<br>';
  };
  var steal_keys = function(event) {
    kap.keydown(event.event);
  };
  
  var steal_focus = function() {
    $(window).addEvent('keydown', steal_keys );
  };

  var return_focus = function() {
    $(window).removeEvent('keydown', steal_keys);
  };

  window.addEvent('domready', function(){
    steal_focus();
  });
</script>

<body>
  <div style='width: 300px; margin-left: auto; margin-right: auto;'>
   <textarea id='foo' style='width: 300px; height: 200px;'>
    Here lies the body of Yorik.
   </textarea>

   <input type='textfield' id='tf'><br>
   <input type='password' id='pw'><br>
  </div>

  <div id='debug'>Debug: </div>
</body>

</html>
